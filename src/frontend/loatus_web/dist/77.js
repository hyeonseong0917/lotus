"use strict";(self.webpackChunkloatus_web=self.webpackChunkloatus_web||[]).push([[77],{77:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var r=a(7294),n=a(5725),o=a(2658),s=a(576),c=a(8619),m=a(417),l=a(7109),u=a(9334),i=a(1817),h=a(6645),f=a(7562),N=a(5678),g=a(9250),k=a(943),d=a(2440),p=function(e){return"https://cdn-lostark.game.onstove.com/2018/obt/assets/images/common/thumb/".concat(e,"_s.png")},b=[{korName:"디스트로이어",engName:"destroyer"},{korName:"워로드",engName:"warlord"},{korName:"버서커",engName:"berserker"},{korName:"홀리나이트",engName:"holyknight"},{korName:"배틀마스터",engName:"battle_master"},{korName:"인파이터",engName:"infighter"},{korName:"기공사",engName:"force_master"},{korName:"창술사",engName:"lance_master"},{korName:"스트라이커",engName:"striker"},{korName:"데빌헌터",engName:"devilhunter"},{korName:"블래스터",engName:"blaster"},{korName:"호크아이",engName:"hawkeye"},{korName:"스카우터",engName:"scouter"},{korName:"건슬링어",engName:"gunslinger"},{korName:"바드",engName:"bard"},{korName:"서머너",engName:"summoner"},{korName:"아르카나",engName:"arcana"},{korName:"소서리스",engName:"sorceress"},{korName:"데모닉",engName:"demonic"},{korName:"블레이드",engName:"blade"},{korName:"리퍼",engName:"reaper"},{korName:"도화가",engName:"artist"},{korName:"기상술사",engName:"weather_artist"}],v=function(e){for(var t=0,a=b;t<a.length;t++){var r=a[t];if(r.korName===e)return p(r.engName)}return null},y=a(6182),w=a.n(y);function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,o,s,c=[],m=!0,l=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;m=!1}else for(;!(m=(r=o.call(a)).done)&&(c.push(r.value),c.length!==t);m=!0);}catch(e){l=!0,n=e}finally{try{if(!m&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(l)throw n}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return C(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?C(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}const A=function(){var e=(0,g.s0)(),t=localStorage.getItem("accessToken"),a=Z((0,h.Z)(["refreshToken"]),1)[0],p=(0,f.Z)("http://k8s-default-lotuseks-7a795447b1-1658253416.ap-northeast-2.elb.amazonaws.com/auth/my",a.refreshToken),b=p.data,y=(p.error,p.mutate),C=(0,f.Z)("http://k8s-default-lotuseks-7a795447b1-1658253416.ap-northeast-2.elb.amazonaws.com/auth/randomcode",a.refreshToken),A=C.data,E=(C.error,C.mutate,Z((0,r.useState)(null),2)),S=E[0],T=E[1],z=(0,r.useCallback)((function(a){i.Z.post("http://k8s-default-lotuseks-7a795447b1-1658253416.ap-northeast-2.elb.amazonaws.com/user/update/maincharacter",{characterName:a},{headers:{Authorization:"Bearer ".concat(t)}}).then((function(t){N.Am.success(t.data.message),y(),e("/")})).catch((function(e){N.Am.error(e.message,{position:"top-right"})}))}),[]);return(0,r.useEffect)((function(){null!=b&&b.stoveNo&&A&&(0,k.Z)(a.refreshToken).post("http://k8s-default-lotuseks-7a795447b1-1658253416.ap-northeast-2.elb.amazonaws.com/auth/stove",{randomCode:A,stoveUrl:"https://timeline.onstove.com/".concat(b.stoveNo)},{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){T(e.data.data)})).catch((function(e){N.Am.error(e.message)}))}),[A]),b?r.createElement(n.ZP,{container:!0,width:"1000px"},r.createElement(o.Z,{component:"h3",variant:"h3"},"대표로 설정하고 싶은 캐릭터를 클릭해주세요."),r.createElement(d.Z,{sx:{justifyContent:"center",width:"100%"}},null==S?void 0:S.map((function(e,t){return r.createElement(s.ZP,{sx:{width:"30%"}},r.createElement(c.Z,{sx:{bgcolor:"#555",borderRadius:"10px",":hover":{bgcolor:"#777"},color:"#fff",width:"350px"},onClick:function(){return z(e.CharacterName)}},r.createElement(m.Z,null,r.createElement(l.Z,{src:v(e.CharacterClassName)||w().url("nothing@noting.com"),alt:e.CharacterClassName})),r.createElement(u.Z,{primary:e.CharacterName,secondary:r.createElement(o.Z,{component:"span",variant:"body2"},"".concat(e.ServerName," @ Lv.").concat(e.CharacterLevel))})))})))):r.createElement(g.Fg,{to:"/"})}},943:(e,t,a)=>{a.d(t,{Z:()=>n});var r=a(1817);const n=function(e){var t=r.Z.create({headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}});return t.interceptors.response.use((function(e){return e}),(function(t){r.Z.post("http://k8s-default-lotuseks-7a795447b1-1658253416.ap-northeast-2.elb.amazonaws.com/auth/reissue",{},{withCredentials:!1,headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken")),refreshToken:e}}).then((function(e){localStorage.setItem("accessToken",e.data.data)})).catch((function(e){return e}))})),t}}}]);