{"version":3,"file":"161.js","mappings":"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","sources":["webpack://loatus_web/./pages/PostLists/index.tsx","webpack://loatus_web/./utils/fetcher.ts"],"sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\r\nimport { Carousel, Col, Form, InputGroup, Row, Table } from 'react-bootstrap';\r\nimport { Link, useSearchParams } from 'react-router-dom';\r\nimport useSWR from 'swr';\r\nimport fetcher from '@utils/fetcher';\r\nimport { APIItem, IPost, IUser } from '@typings/db';\r\nimport axios from 'axios';\r\nimport {\r\n  Button,\r\n  CircularProgress,\r\n  Grid,\r\n  IconButton,\r\n  PaginationItem,\r\n  Paper,\r\n  Skeleton,\r\n  Stack,\r\n  Typography,\r\n} from '@mui/material';\r\nimport { Pagination } from '@mui/material';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport EditIcon from '@mui/icons-material/Edit';\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport ThumbUpAltIcon from '@mui/icons-material/ThumbUpAlt';\r\nimport { toast } from 'react-toastify';\r\nimport { useNavigate } from 'react-router';\r\nimport ReactTimeAgo from 'react-time-ago';\r\n\r\nconst PostLists = () => {\r\n  const navigate = useNavigate();\r\n  const accessToken = localStorage.getItem('accessToken');\r\n  const [params, setParams] = useSearchParams();\r\n  const {\r\n    data: PostData,\r\n    error,\r\n    mutate,\r\n  } = useSWR<{ post: IPost[]; total: number }>(\r\n    [process.env.REACT_APP_DB_HOST + `/post/?page=${params.get('page') || 1}`, accessToken],\r\n    fetcher,\r\n  );\r\n\r\n  const handleChange = (event: React.ChangeEvent<unknown>, value: number) => {\r\n    setParams(`page=${value}`);\r\n  };\r\n\r\n  const onClickDelete = useCallback((post: IPost) => {\r\n    axios\r\n      .delete(process.env.REACT_APP_DB_HOST + `/post/delete/${post.pk}/`, {\r\n        headers: {\r\n          Authorization: 'Bearer ' + accessToken,\r\n        },\r\n      })\r\n      .then((response) => {\r\n        if (response.data.code <= 300) {\r\n          mutate();\r\n          toast.success(response.data.message);\r\n          return;\r\n        }\r\n        toast.error(response.data.message);\r\n      })\r\n      .catch((error) => {\r\n        toast.error(error.message);\r\n      });\r\n  }, []);\r\n\r\n  const onClickEdit = useCallback(async (post: IPost) => {\r\n    //모달 실행 후 입력 받기\r\n    await axios\r\n      .post(\r\n        process.env.REACT_APP_DB_HOST + `/post/edit/${post.pk}/`,\r\n        {\r\n          title: '바뀌나요',\r\n          content: '안바뀌나요',\r\n        },\r\n        {\r\n          headers: {\r\n            Authorization: 'Bearer ' + accessToken,\r\n          },\r\n        },\r\n      )\r\n      .then((response) => {\r\n        if (response.data.code <= 300) {\r\n          mutate();\r\n          toast.success(response.data.message);\r\n          return;\r\n        }\r\n        toast.error(response.data.message);\r\n      })\r\n      .catch((error) => {\r\n        toast.error(error.message);\r\n      });\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <Paper\r\n        elevation={3}\r\n        sx={{\r\n          margin: 'auto',\r\n          alignContent: 'center',\r\n          textAlign: 'center',\r\n          height: 500,\r\n        }}\r\n      >\r\n        <Typography\r\n          component=\"h1\"\r\n          sx={{\r\n            fontFamily: 'Noto Sans KR, sans-serif',\r\n            fontWeight: 900,\r\n            lineHeight: 1.25,\r\n            letterSpacing: '.9px',\r\n            color: 'inherit',\r\n            fontSize: '2.75rem',\r\n          }}\r\n        >\r\n          <ThumbUpAltIcon sx={{ fontWeight: 900, fontSize: '2.75rem' }} />\r\n          &nbsp; 안녕하세요\r\n        </Typography>\r\n        <Carousel style={{ margin: '25px' }}>\r\n          <Carousel.Item>\r\n            <img\r\n              className={'d-block w-100'}\r\n              src={\r\n                'https://w.namu.la/s/bab5cf7fddc14b6dce8d59e30e25c79bc8519072a57745aaff59239866ea5d217e51fbc224204a65fcdfd52a68df5303696ff7e023e497364ab60c06e35513b9065accc0762ee92daeca448a9f842239c751f12326c0d80815c5c68cd6476c092c4f07c9ed90b8e65f2ec8c59b67059b'\r\n              }\r\n              width={'800'}\r\n              height={'400'}\r\n              alt={'First slide'}\r\n            />\r\n            <Carousel.Caption>\r\n              <h3>글 쓸 사람</h3>\r\n              <p>나야 나 나야 나</p>\r\n            </Carousel.Caption>\r\n          </Carousel.Item>\r\n        </Carousel>\r\n      </Paper>\r\n      <Grid textAlign={'right'} sx={{ paddingTop: '1rem' }}>\r\n        <Button component={Link} to={'/board/write'} color={'primary'} variant=\"outlined\" startIcon={<AddIcon />}>\r\n          글쓰기\r\n        </Button>\r\n      </Grid>\r\n      <Table hover style={{ textAlign: 'center' }}>\r\n        <thead style={{ fontFamily: 'Noto Sans KR, sans-serif' }}>\r\n          <tr>\r\n            <th>No</th>\r\n            <th>TITLE</th>\r\n            <th>AUTHOR</th>\r\n            <th>PUBLISHED_DATE</th>\r\n            <th>MANAGEMENT</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {PostData ? (\r\n            PostData.post.map((post, key) => {\r\n              return (\r\n                <tr key={key} onClick={() => navigate(`/board/${post.pk}`)}>\r\n                  <td>{key}</td>\r\n                  <td style={{ width: '600px' }}>{post.fields.title}</td>\r\n                  <td>{post.fields.author}</td>\r\n                  <td>\r\n                    <ReactTimeAgo date={post.fields.published_date} />\r\n                  </td>\r\n                  <td>\r\n                    <IconButton\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        navigate(`/board/edit/${post.pk}`);\r\n                      }}\r\n                      color={'inherit'}\r\n                    >\r\n                      <EditIcon />\r\n                    </IconButton>\r\n                    <IconButton\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        onClickDelete(post);\r\n                      }}\r\n                      color={'inherit'}\r\n                    >\r\n                      <DeleteIcon />\r\n                    </IconButton>\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })\r\n          ) : (\r\n            <tr>\r\n              <td colSpan={6}>\r\n                <CircularProgress />\r\n              </td>\r\n            </tr>\r\n          )}\r\n        </tbody>\r\n      </Table>\r\n      {PostData && (\r\n        <Pagination\r\n          sx={{ justifyContent: 'center', display: 'flex' }}\r\n          count={Math.trunc(PostData.total / 10) + (PostData.total % 10 && 1)}\r\n          page={Number(params.get('page'))}\r\n          onChange={handleChange}\r\n          variant={'outlined'}\r\n          color={'primary'}\r\n          shape={'rounded'}\r\n          defaultPage={0}\r\n          renderItem={(item) => (\r\n            <PaginationItem component={Link} to={`/board/lists?page=${item.page}`} {...item} sx={{ color: 'black' }} />\r\n          )}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostLists;\r\n","import axios from 'axios';\r\n\r\nconst fetcher = async ([url, token]: string[]) => {\r\n  const res = await axios\r\n    .get(url, {\r\n      withCredentials: false,\r\n      headers: token\r\n        ? {\r\n            Authorization: `Bearer ${token}`,\r\n          }\r\n        : {},\r\n    })\r\n    .then((response) => response.data.data)\r\n    .catch((error) => null);\r\n  if (res === null) {\r\n    const error = new Error('errro');\r\n    throw error;\r\n  }\r\n\r\n  return res;\r\n};\r\n\r\nexport default fetcher;\r\n"],"names":["i","navigate","useNavigate","accessToken","localStorage","getItem","useSearchParams","params","setParams","useSWR","process","get","fetcher","PostData","data","mutate","error","onClickDelete","useCallback","post","axios","pk","headers","Authorization","then","response","code","toast","message","catch","title","content","elevation","sx","margin","alignContent","textAlign","height","component","fontFamily","fontWeight","lineHeight","letterSpacing","color","fontSize","style","className","src","width","alt","paddingTop","Link","to","variant","startIcon","hover","map","key","onClick","fields","author","date","published_date","e","stopPropagation","colSpan","justifyContent","display","count","Math","trunc","total","page","Number","onChange","event","value","shape","defaultPage","renderItem","item","url","token","withCredentials","res","Error"],"sourceRoot":""}